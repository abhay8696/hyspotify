(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1003:function(e,t){},1005:function(e,t){},1075:function(e,t,n){},1084:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(129),o=n.n(i),s=(n(622),n(5)),r=n(609),l=n(32),d=n(26),m=n(331),u=Object(m.a)({apiKey:"AIzaSyAINVFV1RI91b9KJ15qKJQF3Piv1GbwF_s",authDomain:"hyspotify-1.firebaseapp.com",projectId:"hyspotify-1",storageBucket:"hyspotify-1.appspot.com",messagingSenderId:"97714255131",appId:"1:97714255131:web:8f9b8de2325733e0048fbe",measurementId:"G-QN47HC9Z9N"}),p=n(103),j=n.n(p),h=n(50),b=n.n(h),f=(n(1075),n(60)),x=Object(a.createContext)(null),g=Object(a.createContext)(null),O=Object(a.createContext)(null),y=Object(a.createContext)(null),v=Object(a.createContext)(null),w=n(2),k=n.n(w),N=n(6);f.productionBackend,console.log("production MODE");var S=Object(d.e)(u),C=function(){var e=Object(N.a)(k.a.mark((function e(t){var n,a,c,i,o,s,r,l,m,u;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.myID,a=t.myName,c=t.frndID,i=t.frndName,o=t.isSharingSong,s=t.songSharer,r=Object(d.c)(S,"users",n,"chats","".concat(i,"-").concat(c)),l=Object(d.c)(S,"users",c,"chats","".concat(a,"-").concat(n)),e.next=5,Object(d.d)(r);case 5:return m=e.sent,e.next=8,Object(d.d)(l);case 8:u=e.sent,m.exists()&&u.exists()?(Object(d.k)(r,{isSharingSong:o,songSharer:s}),Object(d.k)(l,{isSharingSong:o,songSharer:s})):(Object(d.j)(r,{name:i,isSharingSong:o,songSharer:s}),Object(d.j)(l,{name:a,isSharingSong:o,songSharer:s}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(N.a)(k.a.mark((function e(t){var n,a,c,i,o,s,r,l,m,u;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.myID,a=t.myName,c=t.frndID,i=t.frndName,o=t.uri,s=t.trackName,r=Object(d.c)(S,"users",n,"chats","".concat(i,"-").concat(c)),l=Object(d.c)(S,"users",c,"chats","".concat(a,"-").concat(n)),e.next=5,Object(d.d)(r);case 5:return m=e.sent,e.next=8,Object(d.d)(l);case 8:u=e.sent,m.exists()&&u.exists()&&(Object(d.k)(r,{sharedUri:o,sharedTrackName:s}),Object(d.k)(l,{sharedUri:o,sharedTrackName:s}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(N.a)(k.a.mark((function e(t,n,a,c){var i,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(d.c)(S,"users",t,"chats","".concat(n,"-").concat(a)),o=Object(d.b)(i,"messages"),e.next=4,Object(d.d)(i);case 4:e.sent.exists()?(console.log("existsssssssssss"),Object(d.a)(o,{from:"me",msg:c,createdAt:j.a.firestore.Timestamp.now().toDate()}).then((function(){Object(d.k)(i,{name:n,lastMsgText:c,lastMsgTime:j.a.firestore.Timestamp.now().toDate()})}))):(console.log("DO NOTTTTTTTTTTTTTTT"),Object(d.a)(o,{from:"me",msg:c,createdAt:j.a.firestore.Timestamp.now().toDate()}).then((function(){Object(d.j)(i,{name:n,lastMsgText:c,lastMsgTime:j.a.firestore.Timestamp.now().toDate()})})));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),D=function(){var e=Object(N.a)(k.a.mark((function e(t,n,a,c){var i,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(d.c)(S,"users",t,"chats","".concat(n,"-").concat(a)),o=Object(d.b)(i,"messages"),e.next=4,Object(d.d)(i);case 4:e.sent.exists()?Object(d.a)(o,{from:n,msg:c,createdAt:j.a.firestore.Timestamp.now().toDate()}).then((function(){Object(d.k)(i,{name:n,lastMsgText:c,lastMsgTime:j.a.firestore.Timestamp.now().toDate()})})):Object(d.a)(o,{from:n,msg:c,createdAt:j.a.firestore.Timestamp.now().toDate()}).then((function(){Object(d.j)(i,{name:n,lastMsgText:c,lastMsgTime:j.a.firestore.Timestamp.now().toDate()})}));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),B=n(1135),A=Object(B.a)((function(e){return{searchComp:{width:"100%",padding:"8px 0px",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#42ff75","@media only screen and (min-width: 768px)":{backgroundColor:"#171821",color:"white"}},searchCompHeader:{textAlign:"center"},searchBar:{width:"95%",display:"flex",alignItems:"center",margin:"8px",position:"relative"},searchBox:{flexGrow:"1",padding:"12px 8px",fontSize:"12px",borderRadius:"10px",outline:"none",borderStyle:"none","&:focus":{}},closeSearchButton:{cursor:"pointer",position:"absolute",right:"5px",top:"5px",border:"1px soild black","& svg":{color:"black"}},searchResults:{height:"50vh",width:"95%",overflow:"auto","@media only screen and (min-width: 400px)":{"&::-webkit-scrollbar":{backgroundColor:"inherit",width:"4px",opacity:"0.1"},"&::-webkit-scrollbar-thumb":{backgroundColor:"grey",width:"4px",cursor:"pointer",borderRadius:"2px"},"& :hover":{color:"#42ff75",cursor:"pointer"}}},track:{display:"flex",margin:"8px auto",animation:"$risein 500ms"},"@keyframes risein":{"0%":{opacity:"0"},"100%":{opacity:"1"}},trackImg:{borderRadius:"10px"},trackInfo:{marginLeft:"8px",display:"flex",flexDirection:"column",justifyContent:"center",borderBottom:"1px solid #1DB954",flex:"1",fontSize:"12px"},trackTitle:{},trackArtist:{fontSize:"12px",opacity:"0.7"}}})),z=n(140),R=n.n(z),L=n(1),P=function(e){var t=A(),n=e.closeSearchDrawer,c=e.playTrack,i=Object(a.useContext)(x),o=Object(s.a)(i,2),r=o[0],l=(o[1],Object(a.useState)("")),d=Object(s.a)(l,2),m=d[0],u=d[1],p=Object(a.useState)([]),j=Object(s.a)(p,2),h=j[0],f=j[1];Object(a.useEffect)((function(){if(!m)return u("");f(void 0);var e=!1,t={method:"get",url:"https://api.spotify.com/v1/search?type=track&market=IN&q=".concat(m),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(r)}};return b()(t).then((function(t){e||(console.log(t.data.tracks.items),f(t.data.tracks.items.map((function(e){var t=e.album.images.reduce((function(e,t){return t.height<e.height?t:e}),e.album.images[0]);return{artist:e.artists[0].name,title:e.name,uri:e.uri,albumUrl:t,data:e}}))),console.log(h))})).catch((function(e){console.log(e)})),function(){return e=!0}}),[m]);return Object(L.jsxs)("div",{className:t.searchComp,children:[Object(L.jsx)("span",{className:t.searchCompHeader,children:"Search Tracks "}),Object(L.jsxs)("div",{className:t.searchBar,children:[Object(L.jsx)("input",{placeholder:"Type Here",onChange:function(e){return u(e.target.value)},className:t.searchBox,autoFocus:!0}),Object(L.jsx)("div",{className:t.closeSearchDiv,children:Object(L.jsx)("span",{onClick:function(){return n()},className:t.closeSearchButton,children:Object(L.jsx)(R.a,{})})})]}),Object(L.jsx)("div",{className:t.searchResults,children:function(){var e=[];if(h)return console.log(h),h.map((function(a){e.push(Object(L.jsxs)("div",{className:t.track,onClick:function(){c(a.uri,a.title,a.data),u(""),n()},children:[Object(L.jsx)("span",{children:Object(L.jsx)("img",{src:a.albumUrl.url,className:t.trackImg})}),Object(L.jsxs)("div",{className:t.trackInfo,children:[Object(L.jsxs)("span",{className:t.trackTitle,children:[" ",a.title," "]}),Object(L.jsxs)("span",{className:t.trackArtist,children:[" ",a.artist," "]})]})]},a.albumUrl.url))})),e}()})]})},F=Object(B.a)((function(e){return{loadingComp:{position:"absolute",width:"100vw",top:"50%",display:"flex",alignItems:"center",flexDirection:"column",color:"white"},dot:{display:"block",width:"1.5rem",height:"1.5rem",backgroundColor:"white",borderRadius:"50%",margin:"1rem",animationName:"$dotAnimation",animationDuration:"1000ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",position:"relative"},"@keyframes dotAnimation":{"0%":{backgroundColor:"#42ff75",left:"-50px"},"50%":{backgroundColor:"#1DB954",left:"50px"},"100%":{backgroundColor:"#42ff75",left:"-50px"}}}})),_=function(e){var t=F(),n=e.description;return Object(L.jsxs)("div",{className:t.loadingComp,children:[Object(L.jsx)("div",{className:t.dot}),Object(L.jsx)("span",{children:n})]})},M=Object(a.createContext)(null),E=Object(B.a)((function(e){return{musicBox:{overflowY:"scroll",maxHeight:"calc(100vh - 15vh)","@media only screen and (min-width: 768px)":{fontSize:"12px",maxWidth:"30vw"},"@media only screen and (max-width: 767px)":{fontSize:"14px"},"&::-webkit-scrollbar":{width:"0.3rem",backgroundColor:"inherit"},"&::-webkit-scrollbar-thumb":{background:"inherit",cursor:"pointer",borderRadius:"2px",opacity:"0"},"&::-webkit-scrollbar-thumb:hover":{background:"red"},"&:hover":{"&::-webkit-scrollbar-thumb":{background:"grey",cursor:"pointer",borderRadius:"2px",opacity:"0"}},"& .MuiAccordion-root":{maxWidth:"95%",height:"3rem",borderRadius:"5px",marginTop:"1rem",padding:0}},topTracksHeader:{margin:"12px auto 4px 8px",fontSize:"16px",fontWeight:"600"},topTrackList:{display:"flex",overflowX:"scroll","&::-webkit-scrollbar":{"@media only screen and (min-width: 400px)":{backgroundColor:"inherit",height:"4px",opacity:"0.1"}},"&::-webkit-scrollbar-thumb":{backgroundColor:"grey",height:"4px",cursor:"pointer",borderRadius:"2px"}},topTrack:{display:"flex",flexDirection:"column",cursor:"pointer",marginTop:"4px",marginLeft:"8px","&:hover":{color:"#42ff75"}},"@keyframes riseout":{"0%":{opacity:"0"},"100%":{opacity:"1"}},topTrackImg:{height:"120px",width:"120px",borderRadius:"10px",animation:"$riseout 500ms ease-in-out"},topTrackInfo:{display:"flex",flexDirection:"column"},topTrackArtist:{opacity:"0.6",fontSize:"14px"},searchBar:{display:"flex",margin:"16px 8px 8px 8px"},searchBox:{flexGrow:"1",padding:"12px 8px",backgroundColor:"white",fontSize:"12px",borderRadius:"10px",outline:"none",borderColor:"inherit",borderStyle:"none",color:"#5c5c5c",display:"flex",alignItems:"center",justifyContent:"space-between"},searchDrawer:{fontFamily:"Montserrat",display:"flex",flexDirection:"column",alignItems:"center","@media only screen and (min-width: 768px)":{maxWidth:"30vw","& > *":{maxWidth:"30vw",marginTop:"115px",height:"100%"},"& .MuiPaper-root":{width:"30vw",backgroundColor:"#171821"}},"@media only screen and (mix-width: 767px)":{minWidth:"100vw","& > *":{minWidth:"100vw",marginTop:"115px",height:"100%"}}},closeSearchDiv:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#42ff75"}}})),H=n(1141),W=n(593),U=n.n(W),$=function(e){var t=E(),n=e.insideChatBox,c=e.closeSongDrawer,i=e.isSharingSong,o=Object(a.useContext)(x),r=Object(s.a)(o,2),l=r[0],d=(r[1],Object(a.useContext)(g)),m=Object(s.a)(d,2),u=m[0],p=(m[1],Object(a.useContext)(v)),j=Object(s.a)(p,2),h=(j[0],j[1],Object(a.useContext)(y)),f=Object(s.a)(h,2),O=(f[0],f[1]),w=Object(a.useContext)(M),k=Object(s.a)(w,2),N=(k[0],k[1],Object(a.useState)()),S=Object(s.a)(N,2),C=S[0],I=S[1],T=Object(a.useState)(),D=Object(s.a)(T,2),B=D[0],A=D[1],z=Object(a.useState)(),R=Object(s.a)(z,2),F=R[0],_=R[1],W=Object(a.useState)(!1),$=Object(s.a)(W,2),Y=$[0],G=$[1],X=Object(a.useState)(!0),J=Object(s.a)(X,2),q=(J[0],J[1],Object(a.useState)(!0)),V=Object(s.a)(q,2),K=(V[0],V[1],Object(a.useState)(!1)),Q=Object(s.a)(K,2);Q[0],Q[1];Object(a.useEffect)((function(){ee(),te(),ne()}),[u]);var Z=function(e,t,n){O({uri:e,trackName:t,isSharingSong:i,data:n}),window.localStorage.setItem("last played track",e),c&&c()},ee=function(){var e={method:"get",url:"https://api.spotify.com/v1/playlists/37i9dQZEVXbLZ52XmnySJg?market=IN",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(l)}};b()(e).then((function(e){I(e.data.tracks.items)})).catch((function(e){console.log(e)}))},te=function(){var e={method:"get",url:"https://api.spotify.com/v1/me/top/tracks?time_range=medium_term&limit=20",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(l)}};b()(e).then((function(e){e.data.items&&A(e.data.items)})).catch((function(e){console.log(e)}))},ne=function(){var e={method:"get",url:"https://api.spotify.com/v1/browse/new-releases?country=IN",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(l)}};b()(e).then((function(e){console.log("new Releases"),_(e.data.albums.items),console.log("new Releases")})).catch((function(e){console.log(e)}))},ae=function(){var e,n=[];B&&B.map((function(a){var c="".concat(a.name," = ").concat(a.name.length);e=c.length>25?c.substr(0,25).concat("..."):a.name,n.push(Object(L.jsxs)("div",{className:t.topTrack,onClick:function(){return Z(a.uri,a.name,a)},children:[Object(L.jsx)("img",{src:a.album.images[1].url,className:t.topTrackImg},a.id),Object(L.jsxs)("div",{className:t.topTrackInfo,children:[Object(L.jsxs)("span",{className:t.topTrackName,children:[" ",e," "]}),Object(L.jsxs)("span",{className:t.topTrackArtist,children:[" ",a.artists[0].name," "]})]})]},a.id))}));return 0===n.length&&n.push(Object(L.jsx)("p",{style:{marginLeft:"8px"},className:t.topTrackArtist,children:"Songs Frequently Heard By You Will Be Displyed Here"})),n},ce=function(){if(C){var e,n=[];return C.map((function(a){var c="".concat(a.track.name," = ").concat(a.track.name.length);e=c.length>25?c.substr(0,25).concat("..."):a.track.name,n.push(Object(L.jsxs)("div",{className:t.topTrack,onClick:function(){return Z(a.track.uri,a.track.name,a.track)},children:[Object(L.jsx)("img",{src:a.track.album.images[1].url,className:t.topTrackImg},a.track.id),Object(L.jsxs)("div",{className:t.topTrackInfo,children:[Object(L.jsxs)("span",{className:t.topTrackName,children:[" ",e," "]}),Object(L.jsxs)("span",{className:t.topTrackArtist,children:[" ",a.track.artists[0].name," "]})]})]},a.track.id))})),n}},ie=function(){if(F){var e,n=[];return F.map((function(a){var c="".concat(a.name," = ").concat(a.name.length);e=c.length>25?c.substr(0,25).concat("..."):a.name,n.push(Object(L.jsxs)("div",{className:t.topTrack,onClick:function(){return function(e){var t={method:"get",url:"https://api.spotify.com/v1/albums/".concat(e,"/tracks"),headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(l)}};b()(t).then((function(e){console.log("new ALBUM"),console.log(e.data),console.log("new ALBUM")})).catch((function(e){console.log(e)}))}(a.id)},children:[Object(L.jsx)("img",{src:a.images[0].url,className:t.topTrackImg},a.id),Object(L.jsxs)("div",{className:t.topTrackInfo,children:[Object(L.jsxs)("span",{className:t.topTrackName,children:[" ",e," "]}),Object(L.jsxs)("span",{className:t.topTrackArtist,children:[" ",a.artists[0].name," "]})]})]},a.id))})),n}},oe=function(){G(!1)},se=function(){return window.screen.width>767?"left":"top"};return Object(L.jsx)("div",{className:t.musicBox,children:function(){var e=se();return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:t.searchBar,children:[Object(L.jsxs)("span",{className:t.searchBox,onClick:function(){return G(!0)},children:["Search Tracks...",Object(L.jsx)(U.a,{})]}),Object(L.jsx)(H.a,{anchor:e,open:Y,onClose:function(){return oe()},className:t.searchDrawer,children:Object(L.jsx)(P,{closeSearchDrawer:oe,playTrack:Z})})]}),Object(L.jsx)("div",{className:t.topTracksHeader,children:"Top 50 In India"}),Object(L.jsx)("div",{className:t.topTrackList,children:ce()}),Object(L.jsx)("div",{className:t.topTracksHeader,children:"Frequently Played"}),Object(L.jsx)("div",{className:t.topTrackList,children:ae()}),n?null:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:t.topTracksHeader,children:"New Released Albums"}),Object(L.jsx)("div",{className:t.topTrackList,children:ie()})]})]})}()})},Y=n(13),G=Object(B.a)((function(e){var t;return{spotifyNav:{borderBottom:"1px solid #42ff75","@media only screen and (min-width: 768px)":{height:"15vh !important",fontSize:"2.5rem",margin:"auto 1rem",display:"flex",alignItems:"center"},"@media only screen and (max-width: 767px)":{padding:"1rem 0.2rem",fontSize:"2rem"},"&:hover":{animation:"$nav 5000ms"}},navbar:{display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:"10",flex:"1"},hy:{color:"white"},spotifyH1:{color:"#42ff75"},abhay:{color:"#42ff75",fontSize:"0.6rem"},kamble:{color:"white",fontSize:"0.6rem"},dp_chats:{display:"flex",alignItems:"center"},chatIcon:{color:"#42ff75",fontSize:"2rem",marginRight:"1rem","@media only screen and (min-width: 768px)":{display:"none !important"}},dpImg:{height:"40px",borderRadius:"50%","@media only screen and (min-width: 768px)":{height:"50px"}},spotifyTitle2:{display:"flex",alignItems:"flex-end"},frndDP:{height:"3rem",borderRadius:"50%","@media only screen and (min-width: 768px)":{height:"50px"},"& svg":{height:"48px",width:"48px"}},spotifyTitle_name:{fontSize:"0.9rem",marginLeft:"4px",display:"flex",alignItems:"flex-start",flexDirection:"column",justifyContent:"center"},hy2:{fontSize:"0.6rem"},spotifyH12:{fontSize:"0.6rem",color:"#42ff75"},frndName:{fontSize:"1.5rem",color:"white"},profileInfo:(t={animationName:"$profileInfo",animationDuration:"400ms"},Object(Y.a)(t,"animationName","$profileInfo"),Object(Y.a)(t,"animationDirection","alternate"),Object(Y.a)(t,"backgroundColor","#42ff75"),Object(Y.a)(t,"display","flex"),Object(Y.a)(t,"padding","1rem 0.2rem"),Object(Y.a)(t,"zIndex","1"),t),profileInfoBody:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:"0.5rem",opacity:"0",animation:"$pro 200ms 500ms forwards"},profileName:{fontSize:"3rem"},profileNameXS:{fontSize:"2rem"},logoutDiv:{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",flex:"1",opacity:"0",animation:"$pro 200ms 800ms forwards",position:"absolute",bottom:"8px",right:"8px"},logoutButt:{display:"flex",alignItems:"center",border:"1px solid white",padding:"1px 2px",fontSize:"0.7rem",borderRadius:"10px","& > *":{margin:"auto 2px"},"&:hover":{color:"#1DB954",backgroundColor:"white"},cursor:"pointer"},profileInfoImg:{height:"144px",width:"144px",borderRadius:"50%",opacity:"0",animation:"$pro 200ms 200ms forwards","& svg":{width:"144px",height:"144px"}},chatListHead:{"@media only screen and (min-width: 768px)":{display:"none !important"}},"@keyframes profileInfo":{"0%":{transform:"translateY(-100%)",opacity:"0"},"35%":{opacity:"0"},"100%":{transform:"translateY(0px)",opacity:"1"}},"@keyframes pro":{"100%":{opacity:"1"}}}})),X=n(594),J=n.n(X),q=n(595),V=n.n(q),K=n(102),Q=n.n(K);f.productionBackend,console.log("production MODE");var Z=function(e){var t=G(),n=Object(a.useState)(),c=Object(s.a)(n,2),i=c[0],o=c[1],r=Object(a.useState)(!1),l=Object(s.a)(r,2),d=(l[0],l[1],Object(a.useState)(!1)),m=Object(s.a)(d,2),u=m[0],p=m[1],j=Object(a.useContext)(x),h=Object(s.a)(j,2),b=(h[0],h[1]),f=Object(a.useContext)(g),O=Object(s.a)(f,2),y=O[0],w=(O[1],Object(a.useContext)(v)),k=Object(s.a)(w,2),N=k[0],S=(k[1],e.loggedOut),C=e.insideChatsList,I=e.toggleChatListDrawer,T=e.insideChatBox,D=e.toggleChatBox;Object(a.useEffect)((function(){y&&y.images[0]?o(Object(L.jsx)("img",{src:y.images[0],className:t.dpImg,alt:"dp",onClick:function(){return p(!0)}})):o(null)}),[y]);return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("div",{className:t.spotifyNav,children:[Object(L.jsxs)("div",{className:t.navbar,children:[S?Object(L.jsxs)("div",{className:t.spotifyTitle,children:[Object(L.jsx)("span",{className:t.hy,children:"hy"}),Object(L.jsx)("span",{className:t.spotifyH1,children:"SPOTIFY"}),Object(L.jsx)("span",{className:t.kamble,children:"<"}),Object(L.jsx)("span",{className:t.abhay,children:"abhay_kamble"}),Object(L.jsx)("span",{className:t.kamble,children:"/>"})]}):null,S||!y||C||T?null:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:t.spotifyTitle,children:[Object(L.jsx)("span",{className:t.hy,children:"hy"}),Object(L.jsx)("span",{className:t.spotifyH1,children:"SPOTIFY"}),C?Object(L.jsx)("span",{className:t.hy,children:"Chats"}):null]}),Object(L.jsxs)("div",{className:t.dp_chats,children:[Object(L.jsx)(V.a,{className:t.chatIcon,fontSize:"large",onClick:function(){I(),document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.activeElement.requestFullscreen()}}),i?Object(L.jsx)("img",{src:y.images[0].url,className:t.dpImg,alt:"dp",onClick:function(){return p(!0)}}):Object(L.jsx)(Q.a,{fontSize:"large",className:t.dpImg,onClick:function(){return p(!0)}})]})]}),C?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:t.chatListHead,children:[Object(L.jsx)("span",{className:t.hy,children:"hy"}),Object(L.jsx)("span",{className:t.spotifyH1,children:"SPOTIFY"}),Object(L.jsx)("span",{className:t.hy,children:"Chats"})]}),Object(L.jsx)(R.a,{className:t.chatIcon,fontSize:"large",onClick:function(){return I()}})]}):null,T&&N?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:t.spotifyTitle2,children:[N.images[0]?Object(L.jsx)("img",{src:N.images[0].url,className:t.frndDP,alt:"dp",onClick:function(){return p(!0)}}):Object(L.jsx)("div",{className:t.frndDP,children:Object(L.jsx)(Q.a,{fontSize:"large",onClick:function(){return p(!0)}})}),Object(L.jsxs)("div",{className:t.spotifyTitle_name,children:[Object(L.jsxs)("div",{children:[Object(L.jsx)("span",{className:t.hy2,children:"hy"}),Object(L.jsx)("span",{className:t.spotifyH12,children:"SPOTIFY"}),Object(L.jsx)("span",{className:t.hy2,children:"Chats"})]}),Object(L.jsx)("span",{className:t.frndName,children:N.display_name})]})]}),Object(L.jsx)(R.a,{className:t.chatIcon,fontSize:"large",onClick:function(){D()}})]}):null]}),Object(L.jsx)(H.a,{anchor:"top",open:u,onClose:function(){return p(!1)},children:!S&&y?function(){var e,n,a=Object(L.jsx)(L.Fragment,{});return N?(n=N.display_name,e=N.images[0]?Object(L.jsx)("img",{src:N.images[0].url,className:t.profileInfoImg,alt:"dp"}):Object(L.jsx)("div",{className:t.profileInfoImg,children:Object(L.jsx)(Q.a,{})})):(n=y.display_name,e=y.images[0]?Object(L.jsx)("img",{src:y.images[0].url,className:t.profileInfoImg,alt:"dp"}):Object(L.jsx)("div",{className:t.profileInfoImg,children:Object(L.jsx)(Q.a,{})}),a=Object(L.jsx)("div",{className:t.logoutDiv,children:Object(L.jsxs)("div",{className:t.logoutButt,onClick:function(){return b(null),void window.localStorage.clear()},children:[Object(L.jsx)("span",{children:"LOGOUT"}),Object(L.jsx)(J.a,{})]})})),Object(L.jsxs)("div",{className:t.profileInfo,children:[e,Object(L.jsx)("div",{className:t.profileInfoBody,children:n.length<=9?Object(L.jsx)("span",{className:t.profileName,children:n}):Object(L.jsx)("span",{className:t.profileNameXS,children:n})}),a]})}():null})]})})},ee=n(122),te=n(189),ne=Object(B.a)((function(e){return{miniPlayer:{position:"absolute",bottom:"0",width:"100vw","@media only screen and (min-width: 768px)":{maxWidth:"30vw"}},playNotificaton:{position:"absolute",padding:"16px",borderRadius:"50px",backgroundColor:"red",top:"50vh"},playingSongName:{fontStyle:"italic",fontWeight:"bold"}}})),ae=(n(1138),n(1143),function(e){var t=ne(),n=Object(a.useState)(!1),c=Object(s.a)(n,2),i=(c[0],c[1],Object(a.useState)({open:!1,vertical:"top",horizontal:"center"})),o=Object(s.a)(i,2),r=o[0],l=o[1],d=(r.vertical,r.horizontal,r.open,Object(a.useContext)(g)),m=Object(s.a)(d,2),u=(m[0],m[1],Object(a.useContext)(v)),p=Object(s.a)(u,2),j=(p[0],p[1],Object(a.useContext)(x)),h=Object(s.a)(j,2),b=h[0],f=(h[1],Object(a.useContext)(y)),O=Object(s.a)(f,2),w=O[0],k=(O[1],Object(a.useContext)(M)),N=Object(s.a)(k,2),S=N[0],C=N[1];Object(a.useEffect)((function(){w.uri?(I(),C(!0)):C(!1)}),[w]),Object(a.useEffect)((function(){return C(!1),function(){console.log("EXITING MINIPLAYERRRRRRR"),C(!1)}}),[]);var I=function(){l({open:!0,vertical:"top",horizontal:"center"})};return Object(L.jsx)("div",{className:t.miniPlayer,children:Object(L.jsx)(te.a,{token:b,showSaveIcon:!0,play:S,callback:function(e){console.log(e),e.isPlaying||C(!1),e.isPlaying&&C(!0)},uris:w.uri?[w.uri]:[]})})}),ce=Object(B.a)((function(e){return{navbarSmall:{marginTop:"16px",display:"flex",flexDirection:"column"},spotify:{color:"#42ff75"},hySpotifyChats:{fontSize:"0.6rem"},navBody:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"4px"},dp_name:{display:"flex",alignItems:"center","& svg":{width:"2.5rem",height:"2.5rem"}},"@media only screen and (min-width: 768px)":{close:{"& :hover":{color:"#42ff75",cursor:"pointer"}}},"@media only screen and (max-width: 767px)":{navbarSmall:{display:"none !important"}}}})),ie=function(e){var t=ce(),n=e.chattingWith,a=e.toggleChatBox;return Object(L.jsxs)("div",{className:t.navbarSmall,children:[Object(L.jsxs)("div",{className:t.hySpotifyChats,children:[Object(L.jsx)("span",{className:t.hy,children:"hy"}),Object(L.jsx)("span",{className:t.spotify,children:"SPOTIFY"}),Object(L.jsx)("span",{className:t.hy,children:"Chats"})]}),Object(L.jsxs)("div",{className:t.navBody,children:[Object(L.jsxs)("div",{className:t.dp_name,children:[function(){if(n)return n.images.length?console.log(!0):Object(L.jsx)(Q.a,{})}(),Object(L.jsx)("div",{children:n?n.display_name:null})]}),Object(L.jsx)("div",{onClick:function(){return a()},className:t.close,children:Object(L.jsx)(R.a,{})})]})]})},oe=Object(B.a)((function(e){return{chatBox:{width:"100vw",fontFamily:"Montserrat, Open Sans, sans-serif",backgroundColor:"#171821",height:"92vh",color:"white",margin:"0px",display:"flex",flexDirection:"column","@media only screen and (min-width: 768px)":{width:"30vw",fontSize:"0.8rem !important",maxHeight:"calc(100% - 15vh)"},"@media only screen and (mix-width: 767px)":{}},navbarBig:{"@media only screen and (min-width: 768px)":{display:"none !important"}},navbarSmall:{"@media only screen and (mix-width: 767px)":{display:"none !important"}},songSwitch:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#42ff75",color:"black"},musicIcon:{animationName:"$riseout",animationDuration:"200ms",animationTimingFunction:"ease-in-out",marginRight:"8px"},"@keyframes riseout":{"0%":{transform:"scale(0.1, 0.1)"},"100%":{transform:"scale(1, 1)"}},songDrawer:{fontFamily:"Montserrat",borderBottom:"3px solid #42ff75",backgroundColor:"#171821",color:"white"},songDrawerTitle:{textAlign:"center",fontSize:"1.5rem",marginTop:"8px",color:"#42ff75"},listenTogetherIcons:{display:"flex",justifyContent:"space-between",alignItems:"center"},msgArea:{flex:"1",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",overflow:"auto",boxSizing:"border-box","& > *":{width:"100%"},overflowX:"hidden"},msgBucket:Object(Y.a)({display:"flex",flexDirection:"column-reverse",overflow:"auto",fontSize:"0.8rem",borderRadius:"0px 0px 25px 25px","@media only screen and (min-width: 768px)":{"&::-webkit-scrollbar":{width:"0.3rem",backgroundColor:"inherit"},"&::-webkit-scrollbar-thumb":{background:"grey",borderRadius:"2px",opacity:"0","&:hover":{cursor:"pointer"}}}},"fontSize","12px"),myMsg:{backgroundColor:"white",minWidth:"30%",color:"black",maxWidth:"50%","border-radius":"10px 10px 0px 10px",marginLeft:"auto",padding:"4px 8px",margin:"4px 8px",textAlign:"left",boxShadow:"5px 5px 5px 0px rgba(0,0,0,0.75)",display:"flex",flexDirection:"column",animationName:"$transitionInChatBox",animationDuration:"400ms","@media only screen and (min-width: 768px)":{}},frndMsg:{backgroundColor:"#42ff75",minWidth:"30%",color:"black",maxWidth:"50%","border-radius":"0px 10px 10px 10px",marginRight:"auto",padding:"4px 8px",margin:"4px 8px",textAlign:"left",boxShadow:"5px 5px 5px 0px rgba(0,0,0,0.75)",display:"flex",flexDirection:"column",animationName:"$transitionInChatList",animationDuration:"400ms"},time:{textAlign:"right",fontSize:"10px",fontStyle:"italic",opacity:"0.7","@media only screen and (min-width: 768px)":{fontSize:"9px"}},typingArea:{width:"95vw",display:"flex",alignItems:"center",margin:"0px 8px 8px 8px",borderRadius:"25px",backgroundColor:"white",color:"black","@media only screen and (min-width: 768px)":{width:"99%"}},textBox:{flexGrow:"1",padding:"12px 8px",borderRadius:"25px",fontSize:"12px",outline:"none",borderStyle:"none","&:focus":{}},sendButt:{marginRight:"10px",borderRadius:"50%","@media only screen and (min-width: 768px)":{"& :hover":{color:"#42ff75",cursor:"pointer"}}}}})),se=n(605),re=n.n(se),le=n(1136),de=n(1144),me=n(1145),ue=n(1139),pe=n(604),je=n.n(pe);f.productionBackend,console.log("production MODE");var he,be=function(e){var t=oe(),n=Object(a.useContext)(g),c=Object(s.a)(n,2),i=c[0],o=(c[1],Object(a.useContext)(v)),r=Object(s.a)(o,2),l=r[0],m=(r[1],Object(a.useContext)(y)),u=Object(s.a)(m,2),p=(u[0],u[1]),j=Object(a.useContext)(M),h=Object(s.a)(j,2),b=(h[0],h[1],Object(a.useContext)(O)),f=Object(s.a)(b,2),x=f[0],w=f[1],S=Object(a.useState)(""),B=Object(s.a)(S,2),A=B[0],z=B[1],R=Object(a.useState)([]),P=Object(s.a)(R,2),F=P[0],_=P[1],E=Object(a.useState)(!1),W=Object(s.a)(E,2),U=W[0],Y=W[1],G=Object(a.useState)(!1),X=Object(s.a)(G,2),J=X[0],q=X[1],V=Object(a.useState)({}),K=Object(s.a)(V,2),Q=K[0],te=(K[1],Object(a.useState)(!1)),ne=Object(s.a)(te,2),ce=ne[0],se=ne[1],pe=Object(a.useRef)(),he=e.toggleChatBox,be=e.db;Object(a.useEffect)((function(){return C({myID:i.id,myName:i.display_name,frndID:l.id,frndName:l.display_name,isSharingSong:!1,songSharer:null}),I({myID:i.id,myName:i.display_name,frndID:l.id,frndName:l.display_name,uri:null,trackName:null}),function(){console.log("UNMOUNTING CHATBOX"),q(!1),w(!1),C({myID:i.id,myName:i.display_name,frndID:l.id,frndName:l.display_name,isSharingSong:!1,songSharer:null}),I({myID:i.id,myName:i.display_name,frndID:l.id,frndName:l.display_name,uri:null,trackName:null})}}),[]),Object(a.useEffect)(Object(N.a)(k.a.mark((function e(){var t,n,a,c,o,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.id,n=l.display_name,a=l.id,be&&(c=[],o=Object(d.i)(Object(d.b)(be,"users",t,"chats","".concat(n,"-").concat(a),"messages"),Object(d.h)("createdAt","desc"),Object(d.f)(50)),s=Object(d.i)(Object(d.c)(be,"users",t,"chats","".concat(n,"-").concat(a))),Object(d.g)(o,(function(e){c=[],e.forEach((function(e){c.push(Object(ee.a)(Object(ee.a)({},e.data()),{},{id:e.id}))})),_(c),pe.current&&pe.current.scrollIntoView({behavior:"smooth"})})),Object(d.g)(s,(function(e){if(console.log("updating isSharing..."),e.data()){var t=e.data(),n=t.sharedUri,a=t.sharedTrackName;t.songSharer!==l.display_name||n||q(!0),e.data().isSharingSong||(q(!1),w(!1)),e.data().isSharingSong&&w(!0),e.data().isSharingSong&&n&&p({uri:n,trackName:a,isSharingSong:J})}})));case 2:case"end":return e.stop()}}),e)}))),[be]),Object(a.useEffect)((function(){}),[F]),Object(a.useEffect)((function(){ce&&setTimeout((function(){se(!1)}),5e3)}),[ce]);var fe=function(e){if(e.preventDefault(),A.replace(/\s/g,"").length){console.log("sending msg to database...");var t=i.id,n=i.display_name,a=l.display_name,c=l.id;T(t,a,c,A),D(c,n,t,A),z("")}else console.log("string only contains whitespace (ie. spaces, tabs or line breaks)")};return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:t.chatBox,children:[Object(L.jsx)("div",{className:t.navbarBig,children:Object(L.jsx)(Z,{toggleChatBox:he,insideChatBox:!0})}),Object(L.jsx)("div",{className:t.navbarSmall,children:Object(L.jsx)(ie,{chattingWith:l,toggleChatBox:he})}),Object(L.jsxs)("div",{className:t.msgArea,style:Q,children:[Object(L.jsxs)("div",{className:t.songSwitch,children:[Object(L.jsxs)("div",{children:[Object(L.jsx)("span",{onClick:function(){return se(!0)},children:"Listen Songs Together"}),Object(L.jsx)(le.a,{color:"warning",onClick:function(){return function(e){var t;w(!!e),q(e),t=e?i.display_name:null,C({myID:i.id,myName:i.display_name,frndID:l.id,frndName:l.display_name,isSharingSong:e,songSharer:t})}(!J)},checked:J})]}),J?Object(L.jsx)(je.a,{onClick:function(){return Y(!U)},className:t.musicIcon,fontSize:"large"}):null]}),Object(L.jsxs)("div",{className:t.msgBucket,children:[Object(L.jsx)("div",{ref:pe}),function(){var e,n,a=[],c="",i="";if(F)return F.map((function(o){o.createdAt&&(n=new Date(1e3*o.createdAt.seconds),c=n.getHours(),i=n.getMinutes()),e="".concat(c," : ").concat(i),"me"===o.from?a.push(Object(L.jsxs)("div",{className:t.myMsg,children:[Object(L.jsx)("span",{children:o.msg}),Object(L.jsx)("span",{className:t.time,children:e})]},o.id)):a.push(Object(L.jsxs)("div",{className:t.frndMsg,children:[Object(L.jsx)("span",{children:o.msg}),Object(L.jsx)("span",{className:t.time,children:e})]},o.id))})),a}()]}),Object(L.jsxs)("form",{className:t.typingArea,onSubmit:function(e){return fe(e)},children:[Object(L.jsx)("input",{className:t.textBox,placeholder:"Type Message Here...",onChange:function(e){return z(e.target.value)},value:A}),Object(L.jsx)("span",{className:t.sendButt,children:Object(L.jsx)(re.a,{onClick:function(e){return fe(e)}})})]})]}),Object(L.jsx)("div",{children:x?Object(L.jsx)(ae,{}):null})]}),Object(L.jsx)(H.a,{anchor:"top",open:U,onClose:function(){return Y(!1)},children:Object(L.jsxs)("div",{className:t.songDrawer,children:[Object(L.jsx)("div",{className:t.songDrawerTitle,children:"SPOTIFY API"}),Object(L.jsx)($,{insideChatBox:!0,closeSongDrawer:function(){return Y(!1)},isSharingSong:J}),Object(L.jsx)("div",{style:{fontSize:"0.8rem",textAlign:"center",opacity:"0.7"},children:"Touch Anywhere Below To Close Drawer"})]})}),Object(L.jsxs)(de.a,{open:ce,onClose:function(){return se(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(L.jsx)(ue.a,{id:"alert-dialog-title",children:l?"".concat(l.display_name," wants to play spotify with you."):null}),Object(L.jsxs)(me.a,{children:[Object(L.jsx)("button",{onClick:function(){return se(!1)},children:"Play"}),Object(L.jsx)("button",{onClick:function(){return se(!1),void C({myID:i.id,myName:i.display_name,frndID:l.id,frndName:l.display_name,isSharingSong:!1,songSharer:null})},autoFocus:!0,children:"Don't Play"})]})]})]})},fe=Object(B.a)((function(e){return{chatList:{width:"100vw",fontFamily:"Montserrat, Open Sans, sans-serif",backgroundColor:"#171821",height:"100%",color:"white",fontSize:"12px"},chatListItem:{display:"flex",alignItems:"center",margin:"4px auto","& svg":{width:"3rem",height:"3rem"}},dp:{height:"3rem",borderRadius:"50%"},chatListName:{marginLeft:"8px"},"@media only screen and (min-width: 768px)":{chatList:{maxWidth:"100%"},chatListNav:{display:"none"},chatListItem:{cursor:"pointer","&:hover":{color:"#42ff75"}}},chatDrawer:{"@media only screen and (min-width: 767px)":{"& .css-i9fmh8-MuiBackdrop-root-MuiModal-backdrop":{left:"auto"},"& .MuiPaper-root":{overflowY:"hidden !important"},maxWidth:"30vw",marginTop:"15vh","& > *":{maxWidth:"30vw",marginTop:"16vh"}}}}}));he=f.productionBackend,console.log("production MODEEEEE");var xe,ge=function(e){var t=fe(),n=e.toggleChatListDrawer,c=e.db,i=Object(a.useContext)(g),o=Object(s.a)(i,2),r=o[0],l=(o[1],Object(a.useContext)(v)),d=Object(s.a)(l,2),m=(d[0],d[1]),u=Object(a.useState)(null),p=Object(s.a)(u,2),j=p[0],h=p[1],f=Object(a.useState)(!1),x=Object(s.a)(f,2),O=x[0],y=x[1];Object(a.useEffect)((function(){return w(),function(){console.log("unmounting chatlist component"),h(null)}}),[]);var w=function(){b.a.get("".concat(he,"/chats/allUsers")).then((function(e){h(e.data)})).catch((function(e){return console.error(e)}))},k=function(){m(void 0),y(!1)};return Object(L.jsxs)("div",{className:t.chatList,children:[Object(L.jsx)("div",{className:t.chatListNav,children:Object(L.jsx)(Z,{toggleChatListDrawer:n,insideChatsList:!0})}),Object(L.jsx)("p",{children:"HySpotify Users"}),j?function(){var e=[];return j&&j.map((function(n){var a;a=n.images[0]?Object(L.jsx)("img",{src:n.images[0].url,className:t.dp}):Object(L.jsx)(Q.a,{fontSize:"large",className:t.dp}),n.id!==r.id&&e.push(Object(L.jsxs)("div",{onClick:function(){return function(e){y(!0),m(e)}(n)},className:t.chatListItem,children:[a,Object(L.jsx)("span",{className:t.chatListName,children:n.display_name})]},n.id))})),e}():Object(L.jsx)(_,{description:"Fetching Hyspotify Users"}),Object(L.jsx)(H.a,{anchor:"right",open:O,onClose:function(){return k()},className:t.chatDrawer,children:Object(L.jsx)(be,{toggleChatBox:function(){return k()},db:c})})]})},Oe=n(606),ye=n.n(Oe),ve=Object(B.a)((function(e){return{"@media only screen and (min-width: 768px)":{body2:{width:"30vw","& img":{maxWidth:"100%",borderRadius:"20px"},padding:"5px",marginTop:"16px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},imgReactAudioPlayer:{display:"none"}},currentTrackInfo:{display:"flex",alignItems:"center",flexDirection:"column","& span":{marginTop:"1rem"}},currentSongImg:{borderRadius:"5%"},noPremium:{textAlign:"center",fontSize:"0.7rem",color:"#ff9966",marginBottom:"1rem"},"@media only screen and (max-width: 767px)":{body2:{position:"absolute",bottom:"0",zIndex:"1300",backgroundColor:"#171821"},currentTrackInfo:{display:"none"},noPremium:{display:"none"},reactAudioPlayer:{width:"100vw",height:"8vh",display:"flex",justifyContent:"space-evenly",alignItems:"center"},imgReactAudioPlayer:{maxWidth:"20%",maxHeight:"90%",borderRadius:"50%"}}}})),we=n.p+"static/media/spotify-logo.93e5215d.svg",ke=(n(608),n(607),function(){var e=ve(),t=Object(a.useState)(),n=Object(s.a)(t,2),c=n[0],i=n[1],o=Object(a.useState)(!1),r=Object(s.a)(o,2),l=(r[0],r[1],Object(a.useContext)(g)),d=Object(s.a)(l,2),m=d[0],u=(d[1],Object(a.useContext)(y)),p=Object(s.a)(u,2),j=p[0];p[1];Object(a.useEffect)((function(){j&&j.data&&i(j.data.preview_url)}),[j]);return Object(L.jsxs)("div",{className:e.body2,children:[j.uri?function(){var t;if(j)return j&&j.data&&j.data.album&&(t=j.data.album.images[0].url),Object(L.jsxs)("div",{className:e.currentTrackInfo,children:[Object(L.jsx)("img",{src:t,className:e.currentSongImg}),Object(L.jsx)("span",{children:j.trackName})]})}():Object(L.jsxs)("div",{className:e.currentTrackInfo,children:[Object(L.jsx)("img",{src:we,className:e.currentSongImg}),Object(L.jsx)("span",{children:"Select A Track To Play"})]}),Object(L.jsxs)("div",{className:e.reactAudioPlayer,children:[j&&j.data&&j.data.album?Object(L.jsx)("img",{src:j.data.album.images[0].url,className:e.imgReactAudioPlayer}):null,Object(L.jsx)(ye.a,{src:c,autoPlay:!0,controls:!0})]}),j.uri&&!c?Object(L.jsx)("p",{className:e.noPremium,children:"Preview Unavailable :("}):null,"open"===m.product?Object(L.jsx)("div",{className:e.noPremium,children:"* Unfortunately Spotify Allows Only Premiums Users To Listen Full Tracks Here! *"}):null]})}),Ne=Object(B.a)((function(e){return{spotifyRoot:{height:"100vh",color:"white",display:"flex",flexDirection:"column"},abhay:{color:"#42ff75",fontSize:"0.6rem"},kamble:{color:"white",fontSize:"0.6rem"},"@keyframes nav":{"0%":{},"100%":{}},spotifyBody:{flex:"1","@media only screen and (min-width: 768px)":{display:"flex",justifyContent:"space-between"},"@media only screen and (max-width: 767px)":{position:"relative"}},body3:{maxWidth:"30vw","@media only screen and (max-width: 767px)":{display:"none !important"}},searchIcon:{color:"#42ff75",fontSize:"large"},chatListDrawer:{height:"50vh","@media only screen and (min-width: 767px)":{display:"none"}}}}));xe=f.productionBackend;var Se,Ce,Ie=function(e){var t=Ne(),n=Object(a.useContext)(x),c=Object(s.a)(n,2),i=c[0],o=c[1],r=Object(a.useContext)(g),l=Object(s.a)(r,2),d=l[0],m=l[1],u=Object(a.useContext)(O),p=Object(s.a)(u,2),j=(p[0],p[1],Object(a.useContext)(y)),h=Object(s.a)(j,2),f=(h[0],h[1],e.db),v=Object(a.useState)(!1),w=Object(s.a)(v,2),k=w[0],N=w[1];Object(a.useEffect)((function(){S()}),[]),Object(a.useEffect)((function(){d&&(console.log("registering!!!!!!!!!!"),b.a.post("".concat(xe,"/chats/registerUser"),d).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})))}),[d]);var S=function(){var e={method:"get",url:"https://api.spotify.com/v1/me",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(i)}};b()(e).then((function(e){m(e.data)})).catch((function(e){console.log(e),console.log(i),o(null),window.localStorage.clear()}))},C=function(){return N(!k)};return Object(L.jsxs)("div",{className:t.spotifyRoot,children:[Object(L.jsx)(Z,{userData:d,toggleChatListDrawer:C}),Object(L.jsx)(H.a,{anchor:"right",open:k,onClose:function(){return N(!1)},className:t.chatListDrawer,children:Object(L.jsx)(ge,{db:f,toggleChatListDrawer:C})}),d?Object(L.jsxs)("div",{className:t.spotifyBody,children:[Object(L.jsx)("div",{className:t.body1,children:Object(L.jsx)($,{userData:d})}),Object(L.jsx)(ke,{}),Object(L.jsx)("div",{className:t.body3,children:Object(L.jsx)(ge,{db:f})})]}):null]})},Te=function(e){var t,n,c=Object(a.useState)(),i=Object(s.a)(c,2),o=i[0],r=i[1],l=Object(a.useState)(),d=Object(s.a)(l,2),m=(d[0],d[1]),u=Object(a.useState)(),p=Object(s.a)(u,2),j=(p[0],p[1]);return t=f.productionHost,n=f.productionBackend,Object(a.useEffect)((function(){b.a.post("".concat(n,"/spotify/login"),{data:{code:e,redirectUri:t}}).then((function(e){console.log(e.data),r(e.data.accessToken),m(e.data.refreshToken),j(e.data.expiresIn),window.localStorage.setItem("spotifyToken",e.data.accessToken),window.localStorage.setItem("spotifyRefreshToken",e.data.refreshToken),window.localStorage.setItem("spotifyExpiresIn",e.data.expiresIn),window.history.pushState({},null,"/")})).catch((function(t){console.log("spo err"),console.log(t),console.log(e),console.log("spo err")}))}),[e]),o},De=Object(B.a)((function(e){return{spotifyLogin:{display:"flex",flexDirection:"column",height:"100vh"},loadingDots:{fontSize:"10rem",animationName:"$dotColors",animationDuration:"2000ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",color:"white"},"@keyframes dotColors":{"0%":{color:"white"},"50%":{color:"#1DB954"},"100%":{color:"#42ff75"}},pageBody:{display:"flex",alignItems:"stretch",flexDirection:"column",justifyContent:"center",flex:"1",textAlign:"center",position:"relative"},introText:{color:"white"},loginButton:{},loginButt:{color:"#42ff75",border:"1px solid #42ff75",padding:"16px 32px",borderRadius:"10px","&:hover":{backgroundColor:"#42ff75",color:"white"}},description:{color:"white",textAlign:"center",marginTop:"32px",marginBottom:"32px",fontSize:"0.9rem"},takingToSpotify:{animationName:"$animation1",animationDuration:"1000ms",position:"absolute",top:"0",left:"0",textAlign:"center",width:"99%"},"@keyframes animation1":{"0%":{opacity:0},"100%":{opacity:1}}}})),Be=function(){var e=De();Se=f.spotifyclientID,Ce=f.productionHost;var t,n="https://accounts.spotify.com/authorize?client_id=".concat(Se,"&response_type=code&redirect_uri=").concat(Ce,"&scope=streaming%20user-read-private%20user-read-email%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state%20user-read-currently-playing%20playlist-read-private%20playlist-read-private%20playlist-modify-public%20playlist-read-collaborative%20user-top-read%20user-read-recently-played%20user-read-playback-position%20app-remote-control"),c=new URLSearchParams(window.location.search).get("code"),i=Object(a.useContext)(x),o=Object(s.a)(i,2),r=(o[0],o[1]),l=Object(a.useState)(!1),d=Object(s.a)(l,2),m=d[0],u=d[1];return c&&(t=Te(c)),t?(r(t),console.log(t)):console.log("no access token"),Object(L.jsxs)("div",{className:e.spotifyLogin,children:[Object(L.jsx)(Z,{loggedOut:!0}),Object(L.jsx)("div",{className:e.pageBody,children:c?Object(L.jsx)(_,{description:"fetching data..."}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("div",{className:e.loginButton,onClick:function(){return u(!0)},children:Object(L.jsx)("a",{href:n,children:Object(L.jsx)("span",{className:e.loginButt,children:"Login With Spotify"})})}),Object(L.jsxs)("div",{className:e.description,children:[m?Object(L.jsx)("p",{className:e.takingToSpotify,children:Object(L.jsx)(_,{description:"Taking you to spotify's login page..."})}):null,Object(L.jsx)("p",{children:"Chat with your friends and listen spotfiy togehter"})]})]})})]})},Ae=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(),o=Object(s.a)(i,2),m=o[0],p=o[1],j=Object(a.useState)({uri:void 0,trackName:void 0,isSharingSong:void 0,data:void 0}),h=Object(s.a)(j,2),b=h[0],f=h[1],w=Object(a.useState)(!1),k=Object(s.a)(w,2),N=k[0],S=k[1],C=Object(a.useState)(),I=Object(s.a)(C,2),T=I[0],D=I[1],B=Object(a.useState)(!1),A=Object(s.a)(B,2),z=A[0],R=A[1],P=Object(d.e)(u);return Object(a.useEffect)((function(){window.localStorage.getItem("spotifyToken")&&p(window.localStorage.getItem("spotifyToken"))}),[]),Object(L.jsx)(r.a,{children:Object(L.jsx)("div",{className:"App",children:Object(L.jsx)(x.Provider,{value:[m,p],children:Object(L.jsx)(g.Provider,{value:[n,c],children:Object(L.jsx)(y.Provider,{value:[b,f],children:Object(L.jsx)(M.Provider,{value:[N,S],children:Object(L.jsx)(v.Provider,{value:[T,D],children:Object(L.jsx)(O.Provider,{value:[z,R],children:Object(L.jsxs)(l.c,{children:[Object(L.jsx)(l.a,{exact:!0,path:"/",element:m?Object(L.jsx)(Ie,{db:P}):Object(L.jsx)(Be,{})}),Object(L.jsx)(l.a,{exact:!0,path:"/chats",element:m?Object(L.jsx)(Ie,{db:P}):Object(L.jsx)(Be,{})})]})})})})})})})})})},ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1147)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),i(e),o(e)}))};o.a.render(Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)(Ae,{})}),document.getElementById("root")),ze()},269:function(e,t){},60:function(e){e.exports=JSON.parse('{"spotifyclientID":"4a3b35b273c648259563ca05a9bb4f36","localhost":"http://localhost:3000/","productionHost":"https://hyspotify-1.web.app/","productionBackend":"https://us-central1-hyspotify-1.cloudfunctions.net/user","localBackend":"http://localhost:5001/hyspotify-1/us-central1/user"}')},622:function(e,t,n){},631:function(e,t){},633:function(e,t){},661:function(e,t){},663:function(e,t){},691:function(e,t){},693:function(e,t){},694:function(e,t){},699:function(e,t){},701:function(e,t){},707:function(e,t){},709:function(e,t){},728:function(e,t){},740:function(e,t){},743:function(e,t){},903:function(e,t){},905:function(e,t){},931:function(e,t){},933:function(e,t){},935:function(e,t){},961:function(e,t){},963:function(e,t){}},[[1084,1,2]]]);
//# sourceMappingURL=main.cc8291b5.chunk.js.map